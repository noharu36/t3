# t3

このプロジェクトは、Rustで作成されたシンプルなオブジェクトストレージです。基本的なファイルのアップロード（PUT）、ダウンロード（GET）、削除（DELETE）機能を提供します。
名称はrusT objecT sTrageの略称です（こじつけ）

## 機能

* **PUT:** multipart形式でファイルをアップロードし、一意のオブジェクトIDを返します。データはReed-Solomon符号を用いて分割・エンコードされ、複数のストレージに分散して保存されます。
* **GET:** オブジェクトIDと元のファイル名を指定することで、保存されたファイルを復元し、ダウンロードできます。元のファイル名からMIMEタイプを予測してレスポンスヘッダーに含めます。
* **DELETE:** オブジェクトIDを指定することで、関連するデータをストレージから削除します。削除の成否がレスポンスとして返されます。
* **ログトレース:** `tracing` クレートによるログ出力で、サーバーの動作を追跡できます。
* **バケット:** オブジェクトを論理的にグループ化するためのバケット機能を提供します。
* **オブジェクトメタデータ:** オブジェクトの Content-Type やサイズなどの基本的なメタデータを管理します。


## 使い方 (開発環境)

1.  **クローン:** このリポジトリをクローンしてください。
2.  **ビルド:** `cargo build` コマンドでプロジェクトをビルドします。
3.  **実行:** `cargo run` コマンドでサーバーを起動します。デフォルトでは `127.0.0.1:8080` でリッスンします。(localhostではなぜかアクセスできません...)

## API

* `PUT /bucket/{bucket_name}/{object_key}`: ファイルのアップロード (multipart/form-data)
* `GET /bucket/{bucket_name}/{object_key}`: ファイルのダウンロード
* `DELETE /bucket/{bucket_name}/{object_key}`: ファイルの削除
* `PUT /bucket/{bucket_name}`: バケットの作成
* `GET /bucket`: バケットの一覧表示
* `DELETE /bucket/{bucket_name}`: バケットの削除

**※cURLでPUTTリクエストを送信した時、拡張子からContent-Typeを判断できない場合にエラーが出る可能性があります。PostmanやBrunoなどのAPIクライアントを使うとエラーを解消できるかもしれません...**

## 今後の開発予定

- [x] メタデータの導入
- [x] バケットの概念の導入
- [ ] より高度なスケーラビリティと可用性の実現
- [ ] 認証・認可機能の追加
- [ ] オブジェクトライフサイクル管理
- [ ] バージョン管理
- [ ] S3互換APIの検討

## 注意事項

これはシンプルなオブジェクトストレージのデモンストレーションであり、プロダクション環境での利用を想定したものではありません。セキュリティや耐久性など、多くの点で改善の余地があります。
